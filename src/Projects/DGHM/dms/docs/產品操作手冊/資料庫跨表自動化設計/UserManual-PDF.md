## 資料庫跨表自動化設計(訂單 × 品項 × 自動分群機制)

---

**專案名稱**：資料庫跨表自動化設計  
**適用對象**：崴宇國際內部工作人員
**交付日期**：2026-01  
**文件版本**：v1.0

---

本文件為本專案之正式交付文件之一，  
用於說明 Airtable 系統中「主表 × 子表」之操作方式與自動分群流程。

文件內容著重於實際操作與使用原則，
協助使用者於日常作業中正確建立、維護訂單與品項資料。

---

<div class="page-break"></div>

# 資料庫跨表自動化操作說明手冊

> 本文件為系統操作說明用途，不包含系統邏輯、Automation 或程式碼之說明。

---

## 文件目的與使用對象

本文件為「資料庫跨表自動化機制」之**正式操作說明文件**，用於協助使用者理解並正確使用本系統中之訂單、品項與自動分群相關功能。

本文件適用對象包含：

- 日常負責填寫訂單資料之人員
- 需檢視訂單與品項結果之管理者
- 專案交付與帳務彙整相關人員

本文件不包含系統內部實作細節或工程邏輯，僅說明「可使用的操作方式」與「正確的使用流程」。

建議首次使用者完整閱讀本文件一次；
日常操作時，可直接依照「標準操作流程（SOP）」章節進行。

---

## 系統設計原則說明

本系統採用「主表 × 子表」的資料庫設計方式，其目的為：

- 確保每一筆訂單資料可獨立維護
- 讓每一個箱型、計價品項具備完整且可追溯的明細資料
- 避免資料重複填寫、錯誤覆蓋或統計混亂

因此，本系統**不支援**以單一表單完成所有資料填寫，而是透過明確分工的資料表，搭配自動化機制完成資料展開與彙整。

---

## 系統資料表結構說明（概念）

本系統主要包含以下三類資料表：

1. **主表（如：Quotation / Debit Note）**
   - 負責記錄單號、客戶、期間、總金額、總重量等彙總資訊

2. **子表（如：Package Items / Charge Items / Non‑Taxable Charges）**
   - 每一筆記錄代表一個實際項目（箱子、計價品項）
   - 可各自填寫重量、數量、價格、設備編號等資料

3. **品項主檔（如：Container Master / Charge Catalog）**
   - 僅作為選項來源，不直接承載交易資料

---

## 自動分群（自動展開）功能說明

### 功能目的

自動分群功能用於協助使用者在主表中「選擇品項」後，由系統自動完成以下工作：

- 建立對應的子表明細資料
- 將主表與子表正確關聯
- 避免人工重複建立資料

---

## 標準操作流程（SOP）

### 2.2 自動分群標準操作流程

請務必依照以下順序操作：

#### Step 1｜建立主表資料

於主表（如 Quotation / Debit Note）中新增一筆資料，並填寫基本資訊（單號、客戶、期間等）。

#### Step 2｜於「暫選欄位」選擇品項

於主表中的以下欄位之一進行選擇：

- 🟨 選取箱型（暫）
- 🔴 計稅品項（暫）
- 🔵 不計稅品項（暫）

> 請注意：同一時間僅操作一個「暫」欄位。

#### Step 3｜系統自動建立子表明細

當選擇完成後，系統將自動：

- 建立對應子表資料
- 關聯回該筆主表
- 清空暫選欄位

#### Step 4｜填寫子表細項資料

請至對應子表中填寫該項目的實際資料（重量、數量、價格、設備編號等）。

##### ❌ 常見錯誤操作（請避免）

- 複製（Duplicate）既有訂單作為新訂單
- 同時於多個「暫選欄位」選擇品項
- 直接於子表修改或合併主表連結欄位

上述行為將導致資料關聯錯誤，需由管理者人工排查。

---

## 使用限制與注意事項

為確保資料正確性，請務必留意以下事項：

- 本系統**不支援複製（Duplicate）既有訂單作為新訂單**
- 請勿手動修改子表中的主表連結欄位
- 若需新增品項，請一律透過主表的「暫選欄位」操作
- 系統將自動處理未使用或失效之資料項目，避免殘留錯誤資料

本系統設計已盡量降低誤用風險，但仍需配合正確操作流程使用；
使用者操作行為所導致之資料結果，屬業務操作責任範圍。

---

## 常見問題說明（FAQ）

**Q：為什麼不能像 Excel 一樣直接複製一整列？**  
A：本系統每一筆資料皆具備獨立關聯與邏輯，複製將導致資料連結錯誤，影響統計與後續文件產出。

**Q：為什麼選完品項後，暫選欄位會被清空？**  
A：暫選欄位僅作為操作入口，資料完成展開後即不再需要保留。

---

## 文件版本與維護說明

- 本文件為系統交付之一部分
- 若系統功能調整，將另行提供更新版本
- 本文件不作為系統功能擴充或變更之依據
<div class="page-break"></div>

## 使用範圍與責任邊界

本文件為本專案系統交付之一部分，
用於協助使用者正確操作既有資料庫與自動化流程。

若系統功能、流程或需求有所調整，
請另行提出評估與報價。
